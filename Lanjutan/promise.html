<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
      // jika menggunakan jQuery
      $.ajax({
        url: "http://www.omdbapi.com/?apikey=bbdec2f8&s=avengers",
        success: (movies) => console.log(movies),
      });

      // ajax vanilla js
      const xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function () {
        if (xhr.status === 200) {
          if (xhr.readyState === 4) {
            console.log(JSON.parse(xhr.response));
          }
        } else {
          console.log(xhr.responseText);
        }
      };
      xhr.open("get", "http://www.omdbapi.com/?apikey=bbdec2f8&s=avengers");
      xhr.send();

      // menggunakan fetch
      fetch("http://www.omdbapi.com/?apikey=bbdec2f8&s=avengers")
        .then((response) => response.json())
        .then((response) => console.log(response));

      `-------------------------------------------------------------------------------------------------------------`;

      `-------------------------------------------------------------------------------------------------------------`;

      `-------------------------------------------------------------------------------------------------------------`;

      // // contoh1
      // let ditepati = true;
      // const janji1 = new Promise((resolve, reject) => {
      //   if (ditepati) {
      //     resolve("Janji telah ditepati!");
      //   } else {
      //     reject("Ingkar janji..");
      //   }
      // });
      // console.log("mulai");
      // // console.log(janji1); //[[PromiseState]] : fullfilled, [[PromiseResult]] = resolve/reject
      // janji1.then((response) => console.log(`OK! : ${response}`)).catch((response) => console.log(`NOT OK! : ${response}`));
      // console.log("selesai");

      // contoh2
      let ditepati = true;
      const janji2 = new Promise((resolve, reject) => {
        if (ditepati) {
          setTimeout(() => {
            resolve("Ditepati setelah beberapa waktu");
          }, 2000);
        } else {
          setTimeout(() => {
            reject("Tidak ditepati setelah beberapa waktu");
          }, 2000);
        }
      });
      console.log("mulai");
      // console.log(janji2.then(() => console.log(janji2))); // {pending} = [[PromiseState]] : fullfilled, [[PromiseResult]] = undefined
      janji2
        .finally(() => console.log("selesai menunggu!"))
        .then((response) => console.log(`OK! : ${response}`))
        .catch((response) => console.log(`NOT OK! : ${response}`));
      console.log("selesai");

      `-------------------------------------------------------------------------------------------------------------`;
      // //Promise all
      // const film = new Promise((resolve) => {
      //   setTimeout(() => {
      //     resolve([
      //       {
      //         judul: "Avengers",
      //         sutradara: "Panjul",
      //         pemeran: "Meliodas, Bang",
      //       },
      //     ]);
      //   }, 1000);
      // });
      // const cuaca = new Promise((resolve) => {
      //   setTimeout(() => {
      //     resolve([
      //       {
      //         kota: "Pyongyang",
      //         temp: 26,
      //         kondisi: "Cerah Berawan",
      //       },
      //     ]);
      //   }, 500);
      // });

      // // film.then((response) => console.log(response));
      // // cuaca.then((response) => console.log(response));
      // Promise.all([film, cuaca]) //promise all mengembalikan response secara bersamaan (cmiiw)
      //   // .then((response) => console.log(response)); //di dalam satu array
      //   .then((response) => {
      //     const [film, cuaca] = response;
      //     console.log(film);
      //     console.log(cuaca);
      //   });
    </script>
  </body>
</html>
